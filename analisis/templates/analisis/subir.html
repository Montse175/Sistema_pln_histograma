{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Normalizar Texto</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- CSS personalizado -->
    <link rel="stylesheet" href="{% static 'analisis/css/subir.css' %}">
</head>
<body class="bg-light">

<div class="container mt-5">
    <div class="card shadow-lg rounded-4">
        <div class="card-body">
            <h2 class="card-title text-center mb-4">Normalización de Texto</h2>

            <!-- Formulario -->
            <form method="post" enctype="multipart/form-data" class="mb-3">
                {% csrf_token %}
                <div class="mb-3">
                    {{ form.as_p }}
                </div>

                <!-- Opciones -->
                <div class="mb-3">
                    <h5 class="fw-bold">Opciones de limpieza:</h5>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="select_all">
                        <label class="form-check-label" for="select_all">Seleccionar todo</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="opciones" value="minusculas" id="minusculas">
                        <label class="form-check-label" for="minusculas">Convertir a minúsculas</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="opciones" value="puntuacion" id="puntuacion">
                        <label class="form-check-label" for="puntuacion">Eliminar puntuación</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="opciones" value="stopwords" id="stopwords">
                        <label class="form-check-label" for="stopwords">Eliminar stopwords</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="opciones" value="comillas" id="comillas">
                        <label class="form-check-label" for="comillas">Eliminar comillas (" ')</label>
                    </div>

                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" name="opciones" value="acentos" id="acentos">
                        <label class="form-check-label" for="acentos">Eliminar acentos</label>
                    </div>
                </div>

                <!-- Botón -->
                <div class="d-grid">
                    <button type="submit" class="btn btn-primary btn-lg rounded-pill shadow-sm">
                        Procesar Texto
                    </button>
                </div>
<!-- Resultado -->
{% if texto_original %}
<div class="mt-4">
    <h5>Texto original:</h5>
    <div class="alert alert-secondary">
        {{ texto_original }}
    </div>
</div>
{% endif %}

{% if texto_procesado %}
<div class="mt-4">
    <h5>Texto procesado:</h5>
    <div class="alert alert-success">
        {{ texto_procesado}}
    </div>
</div>
{% endif %}
    <!-- Elegir n -->
<div class="mb-3">
    <label for="n" class="form-label fw-bold">Selecciona tamaño de n-grama:</label>
    <input type="number" class="form-control" id="n" name="n" value="2" min="2">
</div>
{% if ngramas %}
<div class="mt-4">
    <h5>N-gramas generados (n={{ request.POST.n }}):</h5>
    <div class="alert alert-warning">
        {{ ngramas|join:", " }}
    </div>
</div>
{% endif %}

{% if frecuencias %}
<div class="mt-4">
    <h5>Frecuencias de n-gramas:</h5>
    <ul class="list-group">
        {% for ngram, freq in frecuencias.items %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ ngram }}
                <span class="badge bg-primary rounded-pill">{{ freq }}</span>
            </li>
        {% endfor %}
    </ul>
</div>
{% endif %}




            </form>

            <!-- Link -->
            <div class="text-center">
                <a href="/" class="texto-link">Ver lista de textos</a>
            </div>
        </div>
    </div>

</div>

<!-- JS personalizado -->
<script src="{% static 'analisis/js/opcionesSubir.js' %}"></script>
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
